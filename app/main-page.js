"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var view = require("ui/core/view");
var observable = require("data/observable");
var pageData = new observable.Observable();
var description = "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam vel interdum turpis. Proin non orci mi. Etiam lobortis quam risus, nec pellentesque est luctus quis. Nullam dolor neque, sodales vel metus eget, viverra elementum enim. Fusce a nisl iaculis, finibus enim ac, tempor nibh. In hac habitasse platea dictumst. Etiam faucibus, nisl ac molestie varius, nisl odio euismod turpis, in gravida justo arcu id lorem. Suspendisse et hendrerit tellus. Aenean pulvinar purus diam, ut luctus diam imperdiet et.\n\nUt interdum pretium orci, non cursus ante ullamcorper aliquam. In lacinia, dui ut finibus mollis, libero ipsum viverra mauris, ac tincidunt ante dolor id est. Fusce dapibus lacus viverra vestibulum feugiat. Ut ac metus vehicula, venenatis ex sed, molestie arcu. Sed congue odio vel libero volutpat condimentum. Aliquam erat volutpat. Mauris viverra mi nibh, a finibus felis tristique non. Ut non interdum dolor.\n";
var utilityModule = require("utils/utils");
var myDataArray = [
    { title: "Slide 1", color: "#b3cde0", image: "https://raw.githubusercontent.com/manijak/nativescript-photoviewer/master/demo/res/01.jpg" },
    { title: "Slide 2", color: "#6497b1", image: "https://raw.githubusercontent.com/manijak/nativescript-photoviewer/master/demo/res/02.jpg" },
    { title: "Slide 3", color: "#005b96", image: "https://raw.githubusercontent.com/manijak/nativescript-photoviewer/master/demo/res/03.jpg" },
    { title: "Slide 4", color: "#03396c", image: "https://raw.githubusercontent.com/manijak/nativescript-photoviewer/master/demo/res/04.jpg" }
    /*{title:"Slide 5", color: "#011f4b", image: ""}*/
];
var createViewModel = require("./main-view-model").createViewModel;
var frameModule = require("ui/frame");
var items = [];
function onNavigatingTo(args) {
    console.log("hi");
    var page = args.object;
    page.bindingContext = createViewModel();
}
exports.onNavigatingTo = onNavigatingTo;
exports.loaded = function (args) {
    pageData.set("showDetails", true);
    pageData.set("pageTitle", "Resource Center");
    pageData.set("eventTitle", "World fair");
    pageData.set("tab1", "Facebook");
    pageData.set("tab2", "Twitter");
    pageData.set("tab3", "Instagram");
    pageData.set("visibility1", true);
    pageData.set("visibility2", false);
    pageData.set("visibility3", false);
    pageData.set("myDataArray", myDataArray);
    // pageData.set("latitude", latitude);
    // pageData.set("longitude", longitude);
    // pageData.set("zoom", zoom);
    pageData.set("myDataArray", myDataArray);
    if (description.length < 150) {
        console.log("inside this");
        console.log(description.length);
        pageData.set("description", description);
    }
    else {
        console.log("inside this");
        var temp = description.substring(0, 150);
        console.log(temp.length);
        pageData.set("description", temp);
    }
    items = [];
    items.push({
        itemType: "pdf",
        itemName: "Event Flyer",
        itemDesc: "Funeral"
    }, {
        itemType: "canvas",
        itemName: "Canvas Event",
        itemDesc: "For Emma, Forever Ago"
    }, {
        itemType: "webpage",
        itemName: "Web Page",
        itemDesc: "Random Access Memories"
    }, {
        itemType: "map",
        itemName: "Map",
        itemDesc: description
    }, {
        itemType: "text",
        itemName: "Text",
        itemDesc: description
    });
    var page = args.object;
    var listview = view.getViewById(page, "listview");
    listview.items = items;
    args.object.bindingContext = pageData;
};
exports.onSelectedIndexChange = function (args) {
    console.log("tapped");
    var segmetedBar = args.object;
    this.selectedIndex = segmetedBar.selectedIndex;
    console.log(this.selectedIndex);
    switch (this.selectedIndex) {
        case 0:
            pageData.set("visibility1", true);
            pageData.set("visibility2", false);
            pageData.set("visibility3", false);
            break;
        case 1:
            pageData.set("visibility1", false);
            pageData.set("visibility2", true);
            pageData.set("visibility3", false);
            break;
        case 2:
            pageData.set("visibility1", false);
            pageData.set("visibility2", false);
            pageData.set("visibility3", true);
            break;
        default:
            break;
    }
};
exports.myChangeEvent = function (args) {
    var changeEventText = "Page changed to index: " + args.index;
    console.log(changeEventText);
};
exports.toggle = function () {
    pageData.set("showDetails", !pageData.get("showDetails"));
};
exports.listViewItemTap = function (args) {
    var itemIndex = args.index;
};
exports.expandText = function (args) {
    console.log(args.object);
    var lab = args.object;
    var spanlabel = lab.getViewById("seemorelabel");
    if (spanlabel.text === "...see less") {
        var temp = description.substring(0, 150);
        console.log(temp.length);
        pageData.set("description", temp);
        spanlabel.text = "...see more";
    }
    else {
        pageData.set("description", description);
        spanlabel.text = "...see less";
    }
    //console.log(a);  
};
exports.onTap = function (args) {
    var index = args.index;
    var item = items[index];
    var navigationOptions;
    if (item.itemType === "pdf") {
        navigationOptions = {
            moduleName: 'detailed-pdf-list',
            context: {
                param1: "value1",
                param2: "value2"
            }
        };
    }
    else if (item.itemType === "canvas") {
        utilityModule.openUrl("https://iu.instructure.com/courses/1687201/assignments/7915075");
    }
    else if (item.itemType === "text") {
        navigationOptions = {
            moduleName: 'detailed-text-list',
            context: {
                param1: "value1",
                param2: "value2"
            }
        };
    }
    else if (item.itemType === "webpage") {
        navigationOptions = {
            moduleName: 'detailed-webpage-list',
            context: {
                param1: "value1",
                param2: "value2"
            }
        };
    }
    else if (item.itemType === "map") {
        navigationOptions = {
            moduleName: 'detailed-map-list',
            context: {
                param1: "value1",
                param2: "value2"
            }
        };
    }
    if (item.itemType !== "canvas") {
        frameModule.topmost().navigate(navigationOptions);
    }
    console.log('Clicked item with index ' + index);
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi1wYWdlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibWFpbi1wYWdlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQ0EsSUFBSSxJQUFJLEdBQUcsT0FBTyxDQUFDLGNBQWMsQ0FBQyxDQUFDO0FBQ25DLElBQUksVUFBVSxHQUFHLE9BQU8sQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDO0FBQzVDLElBQUksUUFBUSxHQUFHLElBQUksVUFBVSxDQUFDLFVBQVUsRUFBRSxDQUFDO0FBQzNDLElBQUksV0FBVyxHQUFHLDg1QkFHakIsQ0FBQztBQUNGLElBQUksYUFBYSxHQUFHLE9BQU8sQ0FBQyxhQUFhLENBQUMsQ0FBQztBQUUzQyxJQUFJLFdBQVcsR0FBUTtJQUNuQixFQUFDLEtBQUssRUFBQyxTQUFTLEVBQUUsS0FBSyxFQUFFLFNBQVMsRUFBRSxLQUFLLEVBQUMsMkZBQTJGLEVBQUM7SUFDdEksRUFBQyxLQUFLLEVBQUMsU0FBUyxFQUFFLEtBQUssRUFBRSxTQUFTLEVBQUUsS0FBSyxFQUFDLDJGQUEyRixFQUFDO0lBQ3RJLEVBQUMsS0FBSyxFQUFDLFNBQVMsRUFBRSxLQUFLLEVBQUUsU0FBUyxFQUFFLEtBQUssRUFBQywyRkFBMkYsRUFBQztJQUN0SSxFQUFDLEtBQUssRUFBQyxTQUFTLEVBQUUsS0FBSyxFQUFFLFNBQVMsRUFBRSxLQUFLLEVBQUMsMkZBQTJGLEVBQUM7SUFDdEksa0RBQWtEO0NBQ3JELENBQUM7QUFDRixJQUFJLGVBQWUsR0FBRyxPQUFPLENBQUMsbUJBQW1CLENBQUMsQ0FBQyxlQUFlLENBQUM7QUFDbkUsSUFBSSxXQUFXLEdBQUUsT0FBTyxDQUFDLFVBQVUsQ0FBQyxDQUFDO0FBQ3JDLElBQUksS0FBSyxHQUFHLEVBQUUsQ0FBQztBQUVmLHdCQUF3QixJQUFJO0lBQ3hCLE9BQU8sQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDbEIsSUFBSSxJQUFJLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQztJQUN2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SUFBSSxDQUFDLFFBQVEsS0FBRyxLQUFLLENBQUMsQ0FBQSxDQUFDO1FBQzNCLGlCQUFpQixHQUFDO1lBQ2QsVUFBVSxFQUFDLG1CQUFtQjtZQUM5QixPQUFPLEVBQUM7Z0JBQ0osTUFBTSxFQUFFLFFBQVE7Z0JBQ2hCLE1BQU0sRUFBRSxRQUFRO2FBQ25CO1NBQ0osQ0FBQTtJQUNMLENBQUM7SUFDRCxFQUFFLENBQUEsQ0FBQyxJQUFJLENBQUMsUUFBUSxLQUFHLFFBQVEsQ0FBQyxDQUFBLENBQUM7UUFDekIsV0FBVyxDQUFDLE9BQU8sRUFBRSxDQUFDLFFBQVEsQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDO0lBQ3RELENBQUM7SUFDRCxPQUFPLENBQUMsR0FBRyxDQUFDLDBCQUEwQixHQUFHLEtBQUssQ0FBQyxDQUFDO0FBQ3BELENBQUMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFNlZ21lbnRlZEJhciwgU2VnbWVudGVkQmFySXRlbSB9IGZyb20gXCJ1aS9zZWdtZW50ZWQtYmFyXCI7XG52YXIgdmlldyA9IHJlcXVpcmUoXCJ1aS9jb3JlL3ZpZXdcIik7XG52YXIgb2JzZXJ2YWJsZSA9IHJlcXVpcmUoXCJkYXRhL29ic2VydmFibGVcIik7XG52YXIgcGFnZURhdGEgPSBuZXcgb2JzZXJ2YWJsZS5PYnNlcnZhYmxlKCk7XG52YXIgZGVzY3JpcHRpb24gPSBgTG9yZW0gaXBzdW0gZG9sb3Igc2l0IGFtZXQsIGNvbnNlY3RldHVyIGFkaXBpc2NpbmcgZWxpdC4gTnVsbGFtIHZlbCBpbnRlcmR1bSB0dXJwaXMuIFByb2luIG5vbiBvcmNpIG1pLiBFdGlhbSBsb2JvcnRpcyBxdWFtIHJpc3VzLCBuZWMgcGVsbGVudGVzcXVlIGVzdCBsdWN0dXMgcXVpcy4gTnVsbGFtIGRvbG9yIG5lcXVlLCBzb2RhbGVzIHZlbCBtZXR1cyBlZ2V0LCB2aXZlcnJhIGVsZW1lbnR1bSBlbmltLiBGdXNjZSBhIG5pc2wgaWFjdWxpcywgZmluaWJ1cyBlbmltIGFjLCB0ZW1wb3IgbmliaC4gSW4gaGFjIGhhYml0YXNzZSBwbGF0ZWEgZGljdHVtc3QuIEV0aWFtIGZhdWNpYnVzLCBuaXNsIGFjIG1vbGVzdGllIHZhcml1cywgbmlzbCBvZGlvIGV1aXNtb2QgdHVycGlzLCBpbiBncmF2aWRhIGp1c3RvIGFyY3UgaWQgbG9yZW0uIFN1c3BlbmRpc3NlIGV0IGhlbmRyZXJpdCB0ZWxsdXMuIEFlbmVhbiBwdWx2aW5hciBwdXJ1cyBkaWFtLCB1dCBsdWN0dXMgZGlhbSBpbXBlcmRpZXQgZXQuXG5cblV0IGludGVyZHVtIHByZXRpdW0gb3JjaSwgbm9uIGN1cnN1cyBhbnRlIHVsbGFtY29ycGVyIGFsaXF1YW0uIEluIGxhY2luaWEsIGR1aSB1dCBmaW5pYnVzIG1vbGxpcywgbGliZXJvIGlwc3VtIHZpdmVycmEgbWF1cmlzLCBhYyB0aW5jaWR1bnQgYW50ZSBkb2xvciBpZCBlc3QuIEZ1c2NlIGRhcGlidXMgbGFjdXMgdml2ZXJyYSB2ZXN0aWJ1bHVtIGZldWdpYXQuIFV0IGFjIG1ldHVzIHZlaGljdWxhLCB2ZW5lbmF0aXMgZXggc2VkLCBtb2xlc3RpZSBhcmN1LiBTZWQgY29uZ3VlIG9kaW8gdmVsIGxpYmVybyB2b2x1dHBhdCBjb25kaW1lbnR1bS4gQWxpcXVhbSBlcmF0IHZvbHV0cGF0LiBNYXVyaXMgdml2ZXJyYSBtaSBuaWJoLCBhIGZpbmlidXMgZmVsaXMgdHJpc3RpcXVlIG5vbi4gVXQgbm9uIGludGVyZHVtIGRvbG9yLlxuYDtcbnZhciB1dGlsaXR5TW9kdWxlID0gcmVxdWlyZShcInV0aWxzL3V0aWxzXCIpO1xuXG52YXIgbXlEYXRhQXJyYXk6IGFueSA9IFtcbiAgICB7dGl0bGU6XCJTbGlkZSAxXCIsIGNvbG9yOiBcIiNiM2NkZTBcIiwgaW1hZ2U6XCJodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vbWFuaWphay9uYXRpdmVzY3JpcHQtcGhvdG92aWV3ZXIvbWFzdGVyL2RlbW8vcmVzLzAxLmpwZ1wifSxcbiAgICB7dGl0bGU6XCJTbGlkZSAyXCIsIGNvbG9yOiBcIiM2NDk3YjFcIiwgaW1hZ2U6XCJodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vbWFuaWphay9uYXRpdmVzY3JpcHQtcGhvdG92aWV3ZXIvbWFzdGVyL2RlbW8vcmVzLzAyLmpwZ1wifSxcbiAgICB7dGl0bGU6XCJTbGlkZSAzXCIsIGNvbG9yOiBcIiMwMDViOTZcIiwgaW1hZ2U6XCJodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vbWFuaWphay9uYXRpdmVzY3JpcHQtcGhvdG92aWV3ZXIvbWFzdGVyL2RlbW8vcmVzLzAzLmpwZ1wifSxcbiAgICB7dGl0bGU6XCJTbGlkZSA0XCIsIGNvbG9yOiBcIiMwMzM5NmNcIiwgaW1hZ2U6XCJodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vbWFuaWphay9uYXRpdmVzY3JpcHQtcGhvdG92aWV3ZXIvbWFzdGVyL2RlbW8vcmVzLzA0LmpwZ1wifVxuICAgIC8qe3RpdGxlOlwiU2xpZGUgNVwiLCBjb2xvcjogXCIjMDExZjRiXCIsIGltYWdlOiBcIlwifSovXG5dO1xudmFyIGNyZWF0ZVZpZXdNb2RlbCA9IHJlcXVpcmUoXCIuL21haW4tdmlldy1tb2RlbFwiKS5jcmVhdGVWaWV3TW9kZWw7XG52YXIgZnJhbWVNb2R1bGUgPXJlcXVpcmUoXCJ1aS9mcmFtZVwiKTtcbnZhciBpdGVtcyA9IFtdO1xuICAgIFxuZnVuY3Rpb24gb25OYXZpZ2F0aW5nVG8oYXJncykge1xuICAgIGNvbnNvbGUubG9nKFwiaGlcIik7XG4gICAgdmFyIHBhZ2UgPSBhcmdzLm9iamVjdDtcbiAgICBwYWdlLmJpbmRpbmdDb250ZXh0ID0gY3JlYXRlVmlld01vZGVsKCk7XG59XG5leHBvcnRzLm9uTmF2aWdhdGluZ1RvID0gb25OYXZpZ2F0aW5nVG87XG5cbmV4cG9ydHMubG9hZGVkID0gZnVuY3Rpb24oYXJncykge1xuICAgIHBhZ2VEYXRhLnNldChcInNob3dEZXRhaWxzXCIsIHRydWUpO1xuICAgIHBhZ2VEYXRhLnNldChcInBhZ2VUaXRsZVwiLCBcIlJlc291cmNlIENlbnRlclwiKTtcbiAgICBwYWdlRGF0YS5zZXQoXCJldmVudFRpdGxlXCIsIFwiV29ybGQgZmFpclwiKTtcbiAgICBwYWdlRGF0YS5zZXQoXCJ0YWIxXCIsIFwiRmFjZWJvb2tcIik7XG4gICAgcGFnZURhdGEuc2V0KFwidGFiMlwiLCBcIlR3aXR0ZXJcIik7XG4gICAgcGFnZURhdGEuc2V0KFwidGFiM1wiLCBcIkluc3RhZ3JhbVwiKTtcbiAgICBwYWdlRGF0YS5zZXQoXCJ2aXNpYmlsaXR5MVwiLCB0cnVlKTtcbiAgICBwYWdlRGF0YS5zZXQoXCJ2aXNpYmlsaXR5MlwiLCBmYWxzZSk7XG4gICAgcGFnZURhdGEuc2V0KFwidmlzaWJpbGl0eTNcIiwgZmFsc2UpO1xuICAgIHBhZ2VEYXRhLnNldChcIm15RGF0YUFycmF5XCIsIG15RGF0YUFycmF5KTtcbiAgICAvLyBwYWdlRGF0YS5zZXQoXCJsYXRpdHVkZVwiLCBsYXRpdHVkZSk7XG4gICAgLy8gcGFnZURhdGEuc2V0KFwibG9uZ2l0dWRlXCIsIGxvbmdpdHVkZSk7XG4gICAgLy8gcGFnZURhdGEuc2V0KFwiem9vbVwiLCB6b29tKTtcbiAgICBwYWdlRGF0YS5zZXQoXCJteURhdGFBcnJheVwiLCBteURhdGFBcnJheSk7XG4gICAgaWYoZGVzY3JpcHRpb24ubGVuZ3RoPDE1MCl7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiaW5zaWRlIHRoaXNcIik7XG4gICAgICAgIGNvbnNvbGUubG9nKGRlc2NyaXB0aW9uLmxlbmd0aCk7XG4gICAgICAgIHBhZ2VEYXRhLnNldChcImRlc2NyaXB0aW9uXCIsIGRlc2NyaXB0aW9uKTtcbiAgICB9XG4gICAgZWxzZXtcbiAgICAgICAgY29uc29sZS5sb2coXCJpbnNpZGUgdGhpc1wiKTtcbiAgICAgICAgdmFyIHRlbXAgPSBkZXNjcmlwdGlvbi5zdWJzdHJpbmcoMCwgMTUwKTtcbiAgICAgICAgY29uc29sZS5sb2codGVtcC5sZW5ndGgpO1xuICAgICAgICBwYWdlRGF0YS5zZXQoXCJkZXNjcmlwdGlvblwiLCB0ZW1wKTtcbiAgICB9XG4gICAgaXRlbXM9W107XG4gICAgaXRlbXMucHVzaChcbiAgICAgICAge1xuICAgICAgICAgICAgaXRlbVR5cGU6IFwicGRmXCIsXG4gICAgICAgICAgICBpdGVtTmFtZTogXCJFdmVudCBGbHllclwiLFxuICAgICAgICAgICAgaXRlbURlc2M6IFwiRnVuZXJhbFwiXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAgIGl0ZW1UeXBlOiBcImNhbnZhc1wiLFxuICAgICAgICAgICAgaXRlbU5hbWU6IFwiQ2FudmFzIEV2ZW50XCIsXG4gICAgICAgICAgICBpdGVtRGVzYzogXCJGb3IgRW1tYSwgRm9yZXZlciBBZ29cIlxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgICBpdGVtVHlwZTogXCJ3ZWJwYWdlXCIsXG4gICAgICAgICAgICBpdGVtTmFtZTogXCJXZWIgUGFnZVwiLFxuICAgICAgICAgICAgaXRlbURlc2M6IFwiUmFuZG9tIEFjY2VzcyBNZW1vcmllc1wiXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAgIGl0ZW1UeXBlOiBcIm1hcFwiLFxuICAgICAgICAgICAgaXRlbU5hbWU6IFwiTWFwXCIsXG4gICAgICAgICAgICBpdGVtRGVzYzogZGVzY3JpcHRpb25cbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgICAgaXRlbVR5cGU6IFwidGV4dFwiLFxuICAgICAgICAgICAgaXRlbU5hbWU6IFwiVGV4dFwiLFxuICAgICAgICAgICAgaXRlbURlc2M6IGRlc2NyaXB0aW9uXG4gICAgICAgIH1cbiAgICApXG4gICAgdmFyIHBhZ2UgPSBhcmdzLm9iamVjdDtcbiAgICB2YXIgbGlzdHZpZXcgPSB2aWV3LmdldFZpZXdCeUlkKHBhZ2UsIFwibGlzdHZpZXdcIik7XG4gICAgbGlzdHZpZXcuaXRlbXMgPSBpdGVtcztcblxuICAgIGFyZ3Mub2JqZWN0LmJpbmRpbmdDb250ZXh0ID0gcGFnZURhdGE7XG59XG5cbmV4cG9ydHMub25TZWxlY3RlZEluZGV4Q2hhbmdlID0gZnVuY3Rpb24oYXJncyl7XG4gICAgY29uc29sZS5sb2coXCJ0YXBwZWRcIik7XG4gICAgbGV0IHNlZ21ldGVkQmFyID0gPFNlZ21lbnRlZEJhcj5hcmdzLm9iamVjdDtcbiAgICAgICAgdGhpcy5zZWxlY3RlZEluZGV4ID0gc2VnbWV0ZWRCYXIuc2VsZWN0ZWRJbmRleDtcbiAgICAgICAgY29uc29sZS5sb2codGhpcy5zZWxlY3RlZEluZGV4KTtcbiAgICAgICAgc3dpdGNoICh0aGlzLnNlbGVjdGVkSW5kZXgpIHtcbiAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICBwYWdlRGF0YS5zZXQoXCJ2aXNpYmlsaXR5MVwiLCB0cnVlKTtcbiAgICAgICAgICAgICAgICBwYWdlRGF0YS5zZXQoXCJ2aXNpYmlsaXR5MlwiLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgcGFnZURhdGEuc2V0KFwidmlzaWJpbGl0eTNcIiwgZmFsc2UpOyAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICBwYWdlRGF0YS5zZXQoXCJ2aXNpYmlsaXR5MVwiLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgcGFnZURhdGEuc2V0KFwidmlzaWJpbGl0eTJcIiwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgcGFnZURhdGEuc2V0KFwidmlzaWJpbGl0eTNcIiwgZmFsc2UpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgIHBhZ2VEYXRhLnNldChcInZpc2liaWxpdHkxXCIsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICBwYWdlRGF0YS5zZXQoXCJ2aXNpYmlsaXR5MlwiLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgcGFnZURhdGEuc2V0KFwidmlzaWJpbGl0eTNcIiwgdHJ1ZSk7ICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG59XG5cbmV4cG9ydHMubXlDaGFuZ2VFdmVudCA9IGZ1bmN0aW9uKGFyZ3Mpe1xuICAgICAgICB2YXIgY2hhbmdlRXZlbnRUZXh0ID0gXCJQYWdlIGNoYW5nZWQgdG8gaW5kZXg6IFwiICsgYXJncy5pbmRleDtcbiAgICAgICAgY29uc29sZS5sb2coY2hhbmdlRXZlbnRUZXh0KTtcbiAgICB9XG5cblxuZXhwb3J0cy50b2dnbGUgPSBmdW5jdGlvbigpIHtcbiAgICBwYWdlRGF0YS5zZXQoXCJzaG93RGV0YWlsc1wiLCAhcGFnZURhdGEuZ2V0KFwic2hvd0RldGFpbHNcIikpO1xufVxuXG5leHBvcnRzLmxpc3RWaWV3SXRlbVRhcCA9IGZ1bmN0aW9uKGFyZ3MpIHtcbiAgICB2YXIgaXRlbUluZGV4ID0gYXJncy5pbmRleDtcbn1cblxuZXhwb3J0cy5leHBhbmRUZXh0ID0gZnVuY3Rpb24oYXJncyl7XG4gICAgY29uc29sZS5sb2coYXJncy5vYmplY3QpO1xuICAgIHZhciBsYWIgPSA8YW55PmFyZ3Mub2JqZWN0O1xuICAgIHZhciBzcGFubGFiZWwgPSA8YW55PmxhYi5nZXRWaWV3QnlJZChcInNlZW1vcmVsYWJlbFwiKTtcbiAgICBpZihzcGFubGFiZWwudGV4dD09PVwiLi4uc2VlIGxlc3NcIil7XG4gICAgICAgIHZhciB0ZW1wID0gZGVzY3JpcHRpb24uc3Vic3RyaW5nKDAsIDE1MCk7XG4gICAgICAgIGNvbnNvbGUubG9nKHRlbXAubGVuZ3RoKTtcbiAgICAgICAgcGFnZURhdGEuc2V0KFwiZGVzY3JpcHRpb25cIiwgdGVtcCk7XG4gICAgICAgIHNwYW5sYWJlbC50ZXh0PVwiLi4uc2VlIG1vcmVcIjtcbiAgICB9XG4gICAgZWxzZXtcbiAgICAgICAgcGFnZURhdGEuc2V0KFwiZGVzY3JpcHRpb25cIiwgZGVzY3JpcHRpb24pO1xuICAgICAgICBzcGFubGFiZWwudGV4dD1cIi4uLnNlZSBsZXNzXCI7XG4gICAgfVxuICAgIC8vY29uc29sZS5sb2coYSk7ICBcbn1cblxuZXhwb3J0cy5vblRhcCA9IGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgdmFyIGluZGV4ID0gYXJncy5pbmRleDtcbiAgICB2YXIgaXRlbSA9IGl0ZW1zW2luZGV4XTtcbiAgICB2YXIgbmF2aWdhdGlvbk9wdGlvbnM7XG4gICAgaWYoaXRlbS5pdGVtVHlwZT09PVwicGRmXCIpe1xuICAgICAgICBuYXZpZ2F0aW9uT3B0aW9ucz17XG4gICAgICAgICAgICBtb2R1bGVOYW1lOidkZXRhaWxlZC1wZGYtbGlzdCcsXG4gICAgICAgICAgICBjb250ZXh0OntcbiAgICAgICAgICAgICAgICBwYXJhbTE6IFwidmFsdWUxXCIsXG4gICAgICAgICAgICAgICAgcGFyYW0yOiBcInZhbHVlMlwiXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZihpdGVtLml0ZW1UeXBlPT09XCJjYW52YXNcIil7XG4gICAgICAgIHV0aWxpdHlNb2R1bGUub3BlblVybChcImh0dHBzOi8vaXUuaW5zdHJ1Y3R1cmUuY29tL2NvdXJzZXMvMTY4NzIwMS9hc3NpZ25tZW50cy83OTE1MDc1XCIpO1xuICAgIH1cbiAgICBlbHNlIGlmKGl0ZW0uaXRlbVR5cGU9PT1cInRleHRcIil7XG4gICAgICAgIG5hdmlnYXRpb25PcHRpb25zPXtcbiAgICAgICAgICAgIG1vZHVsZU5hbWU6J2RldGFpbGVkLXRleHQtbGlzdCcsXG4gICAgICAgICAgICBjb250ZXh0OntcbiAgICAgICAgICAgICAgICBwYXJhbTE6IFwidmFsdWUxXCIsXG4gICAgICAgICAgICAgICAgcGFyYW0yOiBcInZhbHVlMlwiXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZihpdGVtLml0ZW1UeXBlPT09XCJ3ZWJwYWdlXCIpe1xuICAgICAgICBuYXZpZ2F0aW9uT3B0aW9ucz17XG4gICAgICAgICAgICBtb2R1bGVOYW1lOidkZXRhaWxlZC13ZWJwYWdlLWxpc3QnLFxuICAgICAgICAgICAgY29udGV4dDp7XG4gICAgICAgICAgICAgICAgcGFyYW0xOiBcInZhbHVlMVwiLFxuICAgICAgICAgICAgICAgIHBhcmFtMjogXCJ2YWx1ZTJcIlxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYoaXRlbS5pdGVtVHlwZT09PVwibWFwXCIpe1xuICAgICAgICBuYXZpZ2F0aW9uT3B0aW9ucz17XG4gICAgICAgICAgICBtb2R1bGVOYW1lOidkZXRhaWxlZC1tYXAtbGlzdCcsXG4gICAgICAgICAgICBjb250ZXh0OntcbiAgICAgICAgICAgICAgICBwYXJhbTE6IFwidmFsdWUxXCIsXG4gICAgICAgICAgICAgICAgcGFyYW0yOiBcInZhbHVlMlwiXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYoaXRlbS5pdGVtVHlwZSE9PVwiY2FudmFzXCIpe1xuICAgICAgICBmcmFtZU1vZHVsZS50b3Btb3N0KCkubmF2aWdhdGUobmF2aWdhdGlvbk9wdGlvbnMpO1xuICAgIH1cbiAgICBjb25zb2xlLmxvZygnQ2xpY2tlZCBpdGVtIHdpdGggaW5kZXggJyArIGluZGV4KTtcbn07XG5cblxuXG4iXX0=